import sys

N_, M_ = map(int, sys.stdin.readline().split())
grd_ = []
for _ in range(N_):
    grd_.append(list(map(int, sys.stdin.readline().split())))

lst_tetro = [(2, 2, (0, 0), (0, 1), (1, 0), (1, 1)),

             (1, 4, (0, 0), (0, 1), (0, 2), (0, 3)),
             (4, 1, (0, 0), (1, 0), (2, 0), (3, 0)),

             (2, 3, (0, 0), (0, 1), (0, 2), (1, 1)),
             (2, 3, (1, 0), (1, 1), (1, 2), (0, 1)),
             (3, 2, (0, 0), (1, 0), (2, 0), (1, 1)),
             (3, 2, (0, 1), (1, 1), (2, 1), (1, 0)),

             (3, 2, (0, 0), (1, 0), (1, 1), (2, 1)),
             (3, 2, (0, 1), (1, 1), (1, 0), (2, 0)),
             (2, 3, (0, 0), (0, 1), (1, 1), (1, 2)),
             (2, 3, (1, 0), (1, 1), (0, 1), (0, 2)),

             (2, 3, (0, 0), (0, 1), (0, 2), (1, 2)),
             (2, 3, (0, 0), (0, 1), (0, 2), (1, 0)),
             (2, 3, (1, 0), (1, 1), (1, 2), (0, 0)),
             (2, 3, (1, 0), (1, 1), (1, 2), (0, 2)),
             (3, 2, (0, 0), (1, 0), (2, 0), (0, 1)),
             (3, 2, (0, 0), (1, 0), (2, 0), (2, 1)),
             (3, 2, (0, 1), (1, 1), (2, 1), (2, 0)),
             (3, 2, (0, 1), (1, 1), (2, 1), (0, 0))]

max_ = 0
for tetro_ in lst_tetro:
    for idx_n in range(N_ - tetro_[0] + 1):
        for idx_m in range(M_ - tetro_[1] + 1):
            tot_ = 0
            for idx_t_n, idx_t_m in tetro_[2:]:
                tot_ += grd_[idx_n + idx_t_n][idx_m + idx_t_m]
            max_ = max(max_, tot_)
print(max_)

exit()
